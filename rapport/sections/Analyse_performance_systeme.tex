\chapter{Analyse des performances du système d'acquisition}

\section{Méthodologie pour la détermination du paramétrage du système d'acquisition}

Pour déterminer les meilleurs réglages de nos capteurs, nous avons réalisé plusieurs acquisitions du même trajet, en changeant les paramètres à chaque fois. Cela nous a permis de comparer les résultats et d’évaluer l’impact de chaque réglage sur la qualité des données.

Les paramètres modifiés sont les suivants :

\begin{itemize}
  \item \textbf{Accéléromètre}
  \begin{itemize}
    \item Plages : $\pm2g$, $\pm4g$, $\pm8g$, $\pm16g$
    \item Fréquences : 12.5 Hz, 208 Hz, 833 Hz, 1660 Hz, 3330 Hz
  \end{itemize}

  \item \textbf{Gyroscope}
  \begin{itemize}
    \item Plages : $\pm250$ dps, $\pm500$ dps, $\pm1000$ dps, $\pm2000$ dps
    \item Fréquences : 12.5 Hz, 208 Hz, 833 Hz, 1660 Hz, 3330 Hz
  \end{itemize}

  \item \textbf{Magnétomètre}
  \begin{itemize}
    \item Plages : $\pm4$ gauss, $\pm8$ gauss, $\pm12$ gauss, $\pm16$ gauss
    \item Fréquences : 0.625 Hz, 5 Hz, 20 Hz, 150 Hz, 560 Hz
  \end{itemize}
\end{itemize}

Toutes les acquisitions ont été faites sur le même parcours, mais à des jours différents. Les conditions météorologiques n’étaient donc pas les mêmes à chaque fois. Il est donc important de prendre ceci en compte, car cela peut influencer les mesures en introduisant une source de bruit supplémentaire.

Avant de commencer une acquisition, nous avons toujours laissé la carte d’acquisition immobile pendant quelques secondes pour que les capteurs puissent se stabiliser. Cependant, cela a été fait à proximité d’un bâtiment, ce qui n’est pas idéal, en particulier pour le magnétomètre qui peut être perturbé par les structures métalliques aux alentours. Un axe d’amélioration serait donc de débuter les acquisitions dans un environnement dégagé, loin des bâtiments, pour limiter ces perturbations.

\section{Description et analyse du choix des méthodes statistiques avec les résultats obtenus}

Nous avons implémenté manuellement le test de Levene afin de vérifier l’homogénéité des variances entre plusieurs acquisitions. Pour valider notre approche, nous avons comparé les résultats obtenus à ceux fournis par la fonction \texttt{levene} de la bibliothèque \texttt{scipy}. Voici les différentes étapes du processus.

\vspace{0.5cm}

\textbf{1. Importation des acquisitions} \\
Nous avons commencé par importer les différentes séries de mesures à comparer :

\begin{center}
\includegraphics[width=1\linewidth]{sections/Annexes/images_annexes/code_stats_1.png}
\end{center}

\newpage

\textbf{2. Implémentation manuelle du test} \\
Nous avons ensuite codé le test de Levene étape par étape, en calculant les écarts aux médianes puis les sommes de carrés nécessaires à l’évaluation statistique :

\begin{center}
\includegraphics[width=1\linewidth]{sections/Annexes/images_annexes/code_stats_2.png}
\end{center}

\newpage

\textbf{3. Validation avec \texttt{scipy}} \\
Pour s’assurer de la validité de notre implémentation, nous avons comparé nos résultats à ceux de \texttt{scipy.stats.levene}. Une fois cette étape confirmée, nous avons utilisé les résultats pour sélectionner les meilleurs réglages :

\begin{center}
\includegraphics[width=1\linewidth]{sections/Annexes/images_annexes/code_stats_3.png}
\end{center}

\vspace{0.5cm}

\noindent
À l’issue de cette analyse, nous avons retenu les acquisitions suivantes :
\begin{itemize}
    \item Acquisition 13 pour l’accéléromètre,
    \item Acquisition 6 pour le gyroscope,
    \item Acquisition 12 pour le magnétomètre.
\end{itemize}

\section{Analyse des résultats de tracking obtenus}

\subsection{Mouvement extérieur 1}

\subsubsection{Comparaison des trajets}
\begin{figure}[H]
    \centering
    \label{fig: Comparaison trajet mouvement exterieur 1}
    \includegraphics[height=400pt, width = 500pt]{../traitements/mouvement_exterieur1/comparaison_trajets}
    \caption{Comparaison trajet mouvement extérieur 1 (Gps vs Téléphone)}
\end{figure}

Dans cette exemple, on a fait deux tours à l'extérieur et on remarque qu'en prenant les données du téléphone comme repère. Le GPS qu'on utilise n'est pas
trop mauvais. En effet, quand on fait la moyenne des deux trajectoires on retrouve une trajectoire qui ressemble au chemin pris lors de l'acquisition.

\subsubsection{Comparaison latitude  et longitude}
\begin{figure}[h]
    \centering
    \begin{minipage}{0.45\textwidth}
        \centering
        \includegraphics[height = 250pt, width=\linewidth]{../traitements/mouvement_exterieur1/comparaison_latitude}
        \caption{ Comparaison latitude (Gps vs Téléphone) }
    \end{minipage}
    \hfill
    \begin{minipage}{0.45\textwidth}
        \centering
        \includegraphics[height = 250pt , width=\linewidth]{../traitements/mouvement_exterieur1/comparaison_longitude}
        \caption{ Comparaison longitude (Gps vs Téléphone) mouvement exterieur1}
    \end{minipage}
\end{figure}

On remarque que les mesures de latitude et de longitude effectuées à l'aide de notre GPS correspondent pluttôt bien aux mesures réalisées au téléphone sur l'application GPS Logger.\\
On constate cependant qu'en général les mesures prises par l'application mobile présentent des valeurs maximales ( respectivement minimales ) légèrement supérieures ( respectivement inférieures ).

\subsubsection{Boite à moustache vitesse / accéleration}

\begin{figure}[H]
    \centering
    \includegraphics[height=250pt, width = \linewidth]{../traitements/mouvement_exterieur1/boxplots_vitesse_acceleration}
    \caption{Boite à moustache }
    \label{fig: Boxplot mouvement_exterieur1}
\end{figure}\\
On observe une vitesse de marche moyenne de 1 mètre par seconde qui correspond à une vitesse moyenne de 4 kilomètre par heure environ sachant que la seconde boite à moustache présente une moyenne d'accéleration nulle ce qui signifie que l'ensemble des acquisitions ont été effectuées dans les mêmes conditions exactement.



\subsubsection{Evolution de l'erreur mouvement exterieur1}

\begin{figure}[H]
    \centering
    \includegraphics[height=300pt, width = 400pt]{../traitements/mouvement_exterieur1/erreur_evolution}
    \caption{ Evolution de l'erreur en cours du temps }
    \label{fig: erreur_evolution  mouvement_exterieur1}
\end{figure}
Ce graphe illustre l’évolution de l’erreur de position entre les mesures GPS et la position estimée par le téléphone durant un mouvement extérieur. On observe que l’erreur initiale est relativement élevée, atteignant environ 20 mètres, avant de diminuer de manière significative. Par la suite, l’erreur varie de façon irrégulière mais reste généralement comprise entre 2 et 15 mètres. Ces fluctuations peuvent être dues à plusieurs facteurs, tels que des interférences satellites, des obstacles environnementaux (bâtiments, arbres), ou encore des limitations du capteur du téléphone.

Globalement, on remarque une tendance à la stabilisation partielle de l’erreur après les premières observations, ce qui pourrait indiquer un temps d’adaptation ou de calibration du système GPS du téléphone. Ainsi, il faut attendre quelques secondes pour stabiliser avant de commencer nos prochaines acquisitions.


\subsubsection{Valeurs aberrantes}

\begin{figure}[H]
    \centering
    \includegraphics[height=250pt, width = \linewidth]{../traitements/mouvement_exterieur1/valeurs_aberrantes}
    \caption{ Valeurs aberrantes}
    \label{fig: Valeurs aberrantes mouvement_exterieur1}
\end{figure}
La figure~\ref{fig: Valeurs aberrantes mouvement_exterieur1} présente deux graphiques illustrant la détection de \textbf{valeurs aberrantes} dans les séries temporelles de \textbf{vitesse} (graphique intitulé \og Vitesse avec valeurs aberrantes \fg) et d'\textbf{accélération} (graphique intitulé \og Accélération avec valeurs aberrantes \fg) mesurées lors de notre acquisition.

Le graphique \og Vitesse avec valeurs aberrantes \fg montre l’évolution de la vitesse au cours du temps. La courbe bleue représente les vitesses considérées comme normales, tandis que les points rouges indiquent les \textit{valeurs aberrantes} détectées. Ces dernières apparaissent de manière sporadique, souvent aux extrémités de la plage des données. Cela peut refléter des erreurs de capteurs ou des bruits de mesure. La majorité des valeurs se concentrent autour de 1~m/s, ce qui est cohérent avec une vitesse de marche humaine (cf Figure \ref{fig: Boxplot mouvement_exterieur1}).

Le graphique \og Accélération avec valeurs aberrantes \fg montre quant à lui l’évolution de l’accélération. La courbe verte indique les valeurs normales, tandis que les points rouges représentent les accélérations considérées comme aberrantes. On y observe une plus grande densité d'anomalies, ce qui est attendu puisque l’accélération, étant une dérivée seconde, est plus sensible au bruit. Les valeurs normales d’accélération sont généralement proches de zéro, tandis que les pics extrêmes sont identifiés comme des anomalies.

Ainsi, cette figure met en évidence l’importance de la détection de valeurs aberrantes pour améliorer la qualité et la fiabilité des mesures avant tout traitement ou analyse avancée.



\section{Analyse des résultats obtenus en cas de défaillance capteur}
\subsection{Acquisition immobile exterieur 1}
\subsubsection{Comparaison trajet Gps vs Téléphone}
\begin{figure}[H]
    \centering
    \includegraphics[height=400pt, width = 500pt]{../traitements/immobile_exterieur1/comparaison_trajets}
    \caption{Comparaison trajet immobile exterieur 1 (Gps vs Téléphone)}
    \label{fig: Comparaison trajet immobile exterieur 1}
\end{figure}
On remarque que même à l'extérieur, les acquisitions du gps et du téléphone ne sont pas assez précises. Le trajet nous indique qu'on était en mouvement même
si on était immobile.

\subsubsection{Comparaison latitude  et longitude}
\begin{figure}[h]
    \centering
    \begin{minipage}{0.45\textwidth}
        \centering
        \includegraphics[height = 250pt, width=\linewidth]{../traitements/immobile_exterieur1/comparaison_latitude}
        \caption{ Comparaison latitude (Gps vs Téléphone) }
    \end{minipage}
    \hfill
    \begin{minipage}{0.45\textwidth}
        \centering
        \includegraphics[height = 250pt , width=\linewidth]{../traitements/immobile_exterieur1/comparaison_longitude}
        \caption{ Comparaison longitude (Gps vs Téléphone)}
    \end{minipage}
\end{figure}

\subsubsection{Boite à moustache vitesse / accéleration}

\begin{figure}[H]
    \centering
    \includegraphics[height=250pt, width = \linewidth]{../traitements/immobile_exterieur1/boxplots_vitesse_acceleration}
    \caption{Boite à moustache }
    \label{fig: Boxplot immobile exterieur 1}
\end{figure}


\subsubsection{Evolution de l'erreur }

\begin{figure}[H]
    \centering
    \includegraphics[height=300pt, width = 400pt]{../traitements/immobile_exterieur1/erreur_evolution}
    \caption{ Evolution de l'erreur en cours du temps }
    \label{fig: erreur_evolution immobile exterieur }
\end{figure}


\subsubsection{Valeurs aberrantes}

\begin{figure}[H]
    \centering
    \includegraphics[height=250pt, width = \linewidth]{../traitements/immobile_exterieur1/valeurs_aberrantes}
    \caption{ Valeurs aberrantes }
    \label{fig: Valeurs aberrantes immobile exterieur}
\end{figure}

\subsection{ Acquisition immobile exterieur 2 }

\begin{figure}[H]
    \centering
    \includegraphics[height=400pt, width = 500pt]{../traitements/immobile_exterieur2/comparaison_trajets}
    \caption{Comparaison trajet immobile exterieur 2 (Gps vs Téléphone)}
    \label{fig: Comparaison trajet immobile exterieur 2}
\end{figure}

Ici, on peut remarquer que les données fournies par le téléphone sont beaucoup plus précises que les données fournies par le GPS. En effet, on ne peut pas se fier
aux données du GPS. (à conclure après je sais pas voir avec la démarche etc)


\subsubsection{Comparaison latitude  et longitude}
\begin{figure}[h]
    \centering
    \begin{minipage}{0.45\textwidth}
        \centering
        \includegraphics[height = 250pt, width=\linewidth]{../traitements/immobile_exterieur2/comparaison_latitude}
        \caption{ Comparaison latitude (Gps vs Téléphone) immobile exterieur 2}
    \end{minipage}
    \hfill
    \begin{minipage}{0.45\textwidth}
        \centering
        \includegraphics[height = 250pt , width=\linewidth]{../traitements/immobile_exterieur2/comparaison_longitude}
        \caption{ Comparaison longitude (Gps vs Téléphone) immobile exterieur 2 }
    \end{minipage}
\end{figure}

\subsubsection{Boite à moustache vitesse / accéleration}

\begin{figure}[H]
    \centering
    \includegraphics[height=250pt, width = \linewidth]{../traitements/immobile_exterieur2/boxplots_vitesse_acceleration}
    \caption{Boite à moustache }
    \label{fig: Boxplot immobile exterieur 2}
\end{figure}


\subsubsection{Evolution de l'erreur }

\begin{figure}[H]
    \centering
    \includegraphics[height=300pt, width = 400pt]{../traitements/immobile_exterieur2/erreur_evolution}
    \caption{ Evolution de l'erreur en cours du temps }
    \label{fig: erreur_evolution immobile exterieur 2 }
\end{figure}


\subsubsection{Valeurs aberrantes}

\begin{figure}[H]
    \centering
    \includegraphics[height=250pt, width = \linewidth]{../traitements/immobile_exterieur2/valeurs_aberrantes}
    \caption{ Valeurs aberrantes }
    \label{fig: Valeurs aberrantes immobile exterieur 2}
\end{figure}
